!function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(5),s=n(20).EventEmitter,a=function(){function e(t){var n=this;r(this,e),this.token=t,this.url="https://api.telegram.org/bot"+t+"/",this.data={},this._emitter=new s,this._types={message:this._messageHandler.bind(this),callback_query:this._callbackQueryHandler.bind(this)},this._messageTypes=["text","photo","document","audio","sticker","video","voice","contact","location","venue"],this._messageEntities={bot_command:this._botCommandEntityHandler.bind(this)},this.getMe().then(function(e){n.data=e})["catch"](function(e){throw new Error(e)}),(this.listen=function(e,t,r){if(t.end(),!e.body)throw new Error("Botogram's 'listen' method requires body-parser. Use npm install --save body-parser.");r(),n._bodyHandler(e.body)}).bind(this)}return i(e,[{key:"take",value:function(e){this._bodyHandler(e)}},{key:"_bodyHandler",value:function(e){var t=Object.keys(e)[1];this._types[t]?this._types[t](e):console.log("Botogram Error. There is no this message handler:",t)}},{key:"getMe",value:function(){var e=this;return new Promise(function(t,n){o(e.url+"getMe").then(function(e){t(e.data.result)})["catch"](function(e){n(e.data)})})}},{key:"sendMessage",value:function(e){var t=this;return new Promise(function(n,r){o.post(t.url+"sendMessage",e).then(function(e){n(e.data)})["catch"](function(e){r(e.data)})})}},{key:"forwardMessage",value:function(e){var t=this;return new Promise(function(n,r){o.post(t.url+"forwardMessage",e).then(function(e){n(e.data)})["catch"](function(e){r(e.data)})})}},{key:"sendPhoto",value:function(e){var t=this;return new Promise(function(n,r){o.post(t.url+"sendPhoto",e).then(function(e){n(e.data)})["catch"](function(e){r(e.data)})})}},{key:"sendAudio",value:function(e){var t=this;return new Promise(function(n,r){o.post(t.url+"sendAudio",e).then(function(e){n(e.data)})["catch"](function(e){r(e.data)})})}},{key:"sendDocument",value:function(e){var t=this;return new Promise(function(n,r){o.post(t.url+"sendDocument",e).then(function(e){n(e.data)})["catch"](function(e){r(e.data)})})}},{key:"sendSticker",value:function(e){var t=this;return new Promise(function(n,r){o.post(t.url+"sendSticker",e).then(function(e){n(e.data)})["catch"](function(e){r(e.data)})})}},{key:"sendVideo",value:function(e){var t=this;return new Promise(function(n,r){o.post(t.url+"sendVideo",e).then(function(e){n(e.data)})["catch"](function(e){r(e.data)})})}},{key:"sendVoice",value:function(e){var t=this;return new Promise(function(n,r){o.post(t.url+"sendVoice",e).then(function(e){n(e.data)})["catch"](function(e){r(e.data)})})}},{key:"sendLocation",value:function(e){var t=this;return new Promise(function(n,r){o.post(t.url+"sendLocation",e).then(function(e){n(e.data)})["catch"](function(e){r(e.data)})})}},{key:"sendVenue",value:function(e){var t=this;return new Promise(function(n,r){o.post(t.url+"sendVenue",e).then(function(e){n(e.data)})["catch"](function(e){r(e.data)})})}},{key:"sendContact",value:function(e){var t=this;return new Promise(function(n,r){o.post(t.url+"sendContact",e).then(function(e){n(e.data)})["catch"](function(e){r(e.data)})})}},{key:"sendChatAction",value:function(e){var t=this;return new Promise(function(n,r){o.post(t.url+"sendChatAction",e).then(function(e){n(e.data)})["catch"](function(e){r(e.data)})})}},{key:"getUserProfilePhotos",value:function(e){var t=this;return new Promise(function(n,r){o(t.url+"getUserProfilePhotos",e).then(function(e){n(e.data)})["catch"](function(e){r(e.data)})})}},{key:"getFile",value:function(e){var t=this;return new Promise(function(n,r){o(t.url+"getFile",e).then(function(e){n(e.data)})["catch"](function(e){r(e.data)})})}},{key:"kickChatMember",value:function(e){var t=this;return new Promise(function(n,r){o.post(t.url+"kickChatMember",e).then(function(e){n(e.data)})["catch"](function(e){r(e.data)})})}},{key:"unbanChatMember",value:function(e){var t=this;return new Promise(function(n,r){o.post(t.url+"unbanChatMember",e).then(function(e){n(e.data)})["catch"](function(e){r(e.data)})})}},{key:"answerCallbackQuery",value:function(e){var t=this;return new Promise(function(n,r){o.post(t.url+"answerCallbackQuery",e).then(function(e){n(e.data)})["catch"](function(e){r(e.data)})})}},{key:"editMessageText",value:function(e){var t=this;return new Promise(function(n,r){o.post(t.url+"editMessageText",e).then(function(e){n(e.data)})["catch"](function(e){r(e.data)})})}},{key:"editMessageCaption",value:function(e){var t=this;return new Promise(function(n,r){o.post(t.url+"editMessageCaption",e).then(function(e){n(e.data)})["catch"](function(e){r(e.data)})})}},{key:"editMessageReplyMarkup",value:function(e){var t=this;return new Promise(function(n,r){o.post(t.url+"editMessageCaption",e).then(function(e){n(e.data)})["catch"](function(e){r(e.data)})})}},{key:"on",value:function(e,t){this._emitter.on(e,t)}},{key:"_emit",value:function(e,t){return this._emitter.emit(e,t)?(this._logMessage(t),!0):(console.log(this.data.username+"'s on"+e+" listener is not defined."),!1)}},{key:"_messageHandler",value:function(e){var t=e.message,n=this._messageTypes.filter(function(e){return t[e]})[0];if(t.entities){var r=!0,i=!1,o=void 0;try{for(var s,a=t.entities[Symbol.iterator]();!(r=(s=a.next()).done);r=!0){var u=s.value;if(this._messageEntities[u.type])return void this._messageEntities[u.type]({message:t,offset:u.offset,length:u.length})}}catch(c){i=!0,o=c}finally{try{!r&&a["return"]&&a["return"]()}finally{if(i)throw o}}}this._emit(n,e.message)||this._emit("message",e.message)||this._emit("*",e.message)}},{key:"_callbackQueryHandler",value:function(e){this._emit("callback_query",e.callback_query)||this._emit("*",e.message)}},{key:"_botCommandEntityHandler",value:function(e){var t=e.message.text.substr(e.offset,e.length).slice(1);this._types[t]||-1!==this._messageTypes.indexOf(t)?this._emit("command",e.message)||this._emit("*",e.message):this._emit(t,e.message)||this._emit("command",e.message)||this._emit("*",e.message)}},{key:"_logMessage",value:function(e){var t=this._messageTypes.filter(function(t){return e[t]})[0];console.log("("+(new Date).toUTCString()+") => "+this.data.first_name+": ["+e.from.username+"] "+e.from.first_name+" "+e.from.last_name+" ("+e.from.id+"): "+e[t])}}]),e}();e.exports=a},function(e,t){"use strict";function n(e){return"[object Array]"===w.call(e)}function r(e){return"[object ArrayBuffer]"===w.call(e)}function i(e){return"[object FormData]"===w.call(e)}function o(e){var t;return t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer}function s(e){return"string"==typeof e}function a(e){return"number"==typeof e}function u(e){return"undefined"==typeof e}function c(e){return null!==e&&"object"==typeof e}function f(e){return"[object Date]"===w.call(e)}function h(e){return"[object File]"===w.call(e)}function l(e){return"[object Blob]"===w.call(e)}function d(e){return"[object Function]"===w.call(e)}function p(e){return c(e)&&d(e.pipe)}function m(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}function v(){return"undefined"!=typeof window&&"undefined"!=typeof document&&"function"==typeof document.createElement}function y(e,t){if(null!==e&&"undefined"!=typeof e)if("object"==typeof e||n(e)||(e=[e]),n(e))for(var r=0,i=e.length;i>r;r++)t.call(null,e[r],r,e);else for(var o in e)e.hasOwnProperty(o)&&t.call(null,e[o],o,e)}function g(){function e(e,n){"object"==typeof t[n]&&"object"==typeof e?t[n]=g(t[n],e):t[n]=e}for(var t={},n=0,r=arguments.length;r>n;n++)y(arguments[n],e);return t}var w=Object.prototype.toString;e.exports={isArray:n,isArrayBuffer:r,isFormData:i,isArrayBufferView:o,isString:s,isNumber:a,isObject:c,isUndefined:u,isDate:f,isFile:h,isBlob:l,isFunction:d,isStream:p,isStandardBrowserEnv:v,forEach:y,merge:g,trim:m}},function(e,t,n){(function(t){"use strict";var r=n(1),i=n(12),o=n(17),s=n(3),a=n(16),u="undefined"!=typeof window&&window.btoa||n(11),c=n(18);e.exports=function(e,f,h){var l=h.data,d=h.headers;r.isFormData(l)&&delete d["Content-Type"];var p=new XMLHttpRequest,m="onreadystatechange",v=!1;if("test"===t.env.NODE_ENV||"undefined"==typeof window||!window.XDomainRequest||"withCredentials"in p||a(h.url)||(p=new window.XDomainRequest,m="onload",v=!0),h.auth){var y=h.auth.username||"",g=h.auth.password||"";d.Authorization="Basic "+u(y+":"+g)}if(p.open(h.method.toUpperCase(),i(h.url,h.params,h.paramsSerializer),!0),p.timeout=h.timeout,p.onprogress=function(){},p.ontimeout=function(){},p[m]=function(){if(p&&(4===p.readyState||v)&&0!==p.status){var t="getAllResponseHeaders"in p?o(p.getAllResponseHeaders()):null,n=h.responseType&&"text"!==h.responseType?p.response:p.responseText,r={data:s(n,t,h.transformResponse),status:1223===p.status?204:p.status,statusText:1223===p.status?"No Content":p.statusText,headers:t,config:h,request:p};c(e,f,r),p=null}},p.onerror=function(){f(new Error("Network Error")),p=null},p.ontimeout=function(){var e=new Error("timeout of "+h.timeout+"ms exceeded");e.timeout=h.timeout,e.code="ECONNABORTED",f(e),p=null},r.isStandardBrowserEnv()){var w=n(14),_=h.withCredentials||a(h.url)?w.read(h.xsrfCookieName):void 0;_&&(d[h.xsrfHeaderName]=_)}if("setRequestHeader"in p&&r.forEach(d,function(e,t){"undefined"==typeof l&&"content-type"===t.toLowerCase()?delete d[t]:p.setRequestHeader(t,e)}),h.withCredentials&&(p.withCredentials=!0),h.responseType)try{p.responseType=h.responseType}catch(b){if("json"!==p.responseType)throw b}h.progress&&("post"===h.method||"put"===h.method?p.upload.addEventListener("progress",h.progress):"get"===h.method&&p.addEventListener("progress",h.progress)),void 0===l&&(l=null),p.send(l)}}).call(t,n(4))},function(e,t,n){"use strict";var r=n(1);e.exports=function(e,t,n){return r.forEach(n,function(n){e=n(e,t)}),e}},function(e,t){function n(){c&&s&&(c=!1,s.length?u=s.concat(u):f=-1,u.length&&r())}function r(){if(!c){var e=setTimeout(n);c=!0;for(var t=u.length;t;){for(s=u,u=[];++f<t;)s&&s[f].run();f=-1,t=u.length}s=null,c=!1,clearTimeout(e)}}function i(e,t){this.fun=e,this.array=t}function o(){}var s,a=e.exports={},u=[],c=!1,f=-1;a.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new i(e,t)),1!==u.length||c||setTimeout(r,0)},i.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=o,a.addListener=o,a.once=o,a.off=o,a.removeListener=o,a.removeAllListeners=o,a.emit=o,a.binding=function(e){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(e){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},function(e,t,n){e.exports=n(6)},function(e,t,n){"use strict";function r(e){this.defaults=o.merge({},e),this.interceptors={request:new a,response:new a}}var i=n(9),o=n(1),s=n(8),a=n(7),u=n(15),c=n(13),f=n(10),h=n(3);r.prototype.request=function(e){"string"==typeof e&&(e=o.merge({url:arguments[0]},arguments[1])),e=o.merge(i,this.defaults,{method:"get"},e),e.baseURL&&!u(e.url)&&(e.url=c(e.baseURL,e.url)),e.withCredentials=e.withCredentials||this.defaults.withCredentials,e.data=h(e.data,e.headers,e.transformRequest),e.headers=o.merge(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),o.forEach(["delete","get","head","post","put","patch","common"],function(t){delete e.headers[t]});var t=[s,void 0],n=Promise.resolve(e);for(this.interceptors.request.forEach(function(e){t.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function(e){t.push(e.fulfilled,e.rejected)});t.length;)n=n.then(t.shift(),t.shift());return n};var l=new r(i),d=e.exports=f(r.prototype.request,l);d.defaults=l.defaults,d.interceptors=l.interceptors,d.create=function(e){return new r(e)},d.all=function(e){return Promise.all(e)},d.spread=n(19),o.forEach(["delete","get","head"],function(e){r.prototype[e]=function(t,n){return this.request(o.merge(n||{},{method:e,url:t}))},d[e]=f(r.prototype[e],l)}),o.forEach(["post","put","patch"],function(e){r.prototype[e]=function(t,n,r){return this.request(o.merge(r||{},{method:e,url:t,data:n}))},d[e]=f(r.prototype[e],l)})},function(e,t,n){"use strict";function r(){this.handlers=[]}var i=n(1);r.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},r.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},r.prototype.forEach=function(e){i.forEach(this.handlers,function(t){null!==t&&e(t)})},e.exports=r},function(e,t,n){(function(t){"use strict";e.exports=function(e){return new Promise(function(r,i){try{var o;"function"==typeof e.adapter?o=e.adapter:"undefined"!=typeof XMLHttpRequest?o=n(2):"undefined"!=typeof t&&(o=n(2)),"function"==typeof o&&o(r,i,e)}catch(s){i(s)}})}}).call(t,n(4))},function(e,t,n){"use strict";var r=n(1),i=/^\)\]\}',?\n/,o={"Content-Type":"application/x-www-form-urlencoded"};e.exports={transformRequest:[function(e,t){return r.isFormData(e)||r.isArrayBuffer(e)||r.isStream(e)?e:r.isArrayBufferView(e)?e.buffer:!r.isObject(e)||r.isFile(e)||r.isBlob(e)?e:(r.isUndefined(t)||(r.forEach(t,function(e,n){"content-type"===n.toLowerCase()&&(t["Content-Type"]=e)}),r.isUndefined(t["Content-Type"])&&(t["Content-Type"]="application/json;charset=utf-8")),JSON.stringify(e))}],transformResponse:[function(e){if("string"==typeof e){e=e.replace(i,"");try{e=JSON.parse(e)}catch(t){}}return e}],headers:{common:{Accept:"application/json, text/plain, */*"},patch:r.merge(o),post:r.merge(o),put:r.merge(o)},timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&300>e}}},function(e,t){"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},function(e,t){"use strict";function n(){this.message="String contains an invalid character"}function r(e){for(var t,r,o=String(e),s="",a=0,u=i;o.charAt(0|a)||(u="=",a%1);s+=u.charAt(63&t>>8-a%1*8)){if(r=o.charCodeAt(a+=.75),r>255)throw new n;t=t<<8|r}return s}var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.prototype=new Error,n.prototype.code=5,n.prototype.name="InvalidCharacterError",e.exports=r},function(e,t,n){"use strict";function r(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var i=n(1);e.exports=function(e,t,n){if(!t)return e;var o;if(n)o=n(t);else{var s=[];i.forEach(t,function(e,t){null!==e&&"undefined"!=typeof e&&(i.isArray(e)&&(t+="[]"),i.isArray(e)||(e=[e]),i.forEach(e,function(e){i.isDate(e)?e=e.toISOString():i.isObject(e)&&(e=JSON.stringify(e)),s.push(r(t)+"="+r(e))}))}),o=s.join("&")}return o&&(e+=(-1===e.indexOf("?")?"?":"&")+o),e}},function(e,t){"use strict";e.exports=function(e,t){return e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,"")}},function(e,t,n){"use strict";var r=n(1);e.exports=r.isStandardBrowserEnv()?function(){return{write:function(e,t,n,i,o,s){var a=[];a.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),r.isString(i)&&a.push("path="+i),r.isString(o)&&a.push("domain="+o),s===!0&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()},function(e,t){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t,n){"use strict";var r=n(1);e.exports=r.isStandardBrowserEnv()?function(){function e(e){var t=e;return n&&(i.setAttribute("href",t),t=i.href),i.setAttribute("href",t),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:"/"===i.pathname.charAt(0)?i.pathname:"/"+i.pathname}}var t,n=/(msie|trident)/i.test(navigator.userAgent),i=document.createElement("a");return t=e(window.location.href),function(n){var i=r.isString(n)?e(n):n;return i.protocol===t.protocol&&i.host===t.host}}():function(){return function(){return!0}}()},function(e,t,n){"use strict";var r=n(1);e.exports=function(e){var t,n,i,o={};return e?(r.forEach(e.split("\n"),function(e){i=e.indexOf(":"),t=r.trim(e.substr(0,i)).toLowerCase(),n=r.trim(e.substr(i+1)),t&&(o[t]=o[t]?o[t]+", "+n:n)}),o):o}},function(e,t){"use strict";e.exports=function(e,t,n){var r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(n):e(n)}},function(e,t){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(e){return"function"==typeof e}function i(e){return"number"==typeof e}function o(e){return"object"==typeof e&&null!==e}function s(e){return void 0===e}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!i(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,i,a,u,c;if(this._events||(this._events={}),"error"===e&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[e],s(n))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1),n.apply(this,a)}else if(o(n))for(a=Array.prototype.slice.call(arguments,1),c=n.slice(),i=c.length,u=0;i>u;u++)c[u].apply(this,a);return!0},n.prototype.addListener=function(e,t){var i;if(!r(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,r(t.listener)?t.listener:t),this._events[e]?o(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,o(this._events[e])&&!this._events[e].warned&&(i=s(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,i&&i>0&&this._events[e].length>i&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function n(){this.removeListener(e,n),i||(i=!0,t.apply(this,arguments))}if(!r(t))throw TypeError("listener must be a function");var i=!1;return n.listener=t,this.on(e,n),this},n.prototype.removeListener=function(e,t){var n,i,s,a;if(!r(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],s=n.length,i=-1,n===t||r(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(o(n)){for(a=s;a-- >0;)if(n[a]===t||n[a].listener&&n[a].listener===t){i=a;break}if(0>i)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(i,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],r(n))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?r(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(r(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}}]);